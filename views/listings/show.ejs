<% layout("/layouts/boilerplate") %>

  <body>
    <div class="conatiner">
      <h3 class="heading">Listing Details </h3>
      <div class="show-card">
        <div class="allImg">
          <div class="main-img">
            <img src="<%= listing.image.url[0] %>" class="card-img-top" alt="...">
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-modal" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              Show all Images
            </button>
          </div>
          <div class="images img-res">
            <img src="<%= listing.image.url[1] %>" class="card-img-top" alt="...">
            <img src="<%= listing.image.url[2] %>" class="card-img-top" alt="...">
            <img src="<%= listing.image.url[3] %>" class="card-img-top" alt="...">
            <img src="<%= listing.image.url[4] %>" class="card-img-top" alt="...">
          </div>
        </div>
        <div class="sm-sc-modal">
          <!-- Modal -->
          <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-body">
                  <div class="close-btn">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active" data-bs-interval="10000">
                        <img src="<%= listing.image.url[0] %>" class="d-block" alt="...">
                      </div>
                      <div class="carousel-item" data-bs-interval="2000">
                        <img src="<%= listing.image.url[1] %>" class="d-block" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="<%= listing.image.url[2] %>" class="d-block" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="<%= listing.image.url[3] %>" class="d-block" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="<%= listing.image.url[4] %>" class="d-block" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="<%= listing.image.url[5] %>" class="d-block" alt="...">
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval"
                      data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval"
                      data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- card details -->
        <div class="card-deatil">
          <h4>
            <%= listing.title %>
          </h4>
          <p class="card-info">
            <%= listing.description %>
          </p>
          <div class="amenities">
            <h5>Amenities</h5>
            <ul class="amenities-list">
              <% for (let amenity of listing.amenities) { %>
                <li>
                  <%= amenity %>
                </li>
                <% } %>
            </ul>
          </div>
          <div class="review">
            <h5>Reviews</h5>
            <div class="rating">
              <div class="guest-fav">
                <h5>Guest <br> Favourite</h5>
              </div>
              <div class="guest-loved">
                <h5>One of the most loved places on <br> Wanderlust, according to guests</h5>
              </div>
              <div class="rating-value">
                <h5>
                  <%= listing.rating %>
                </h5>
                <span class="stars">
                  <% for(let i=0; i<5; i++) { %>
                    <i class="fa-solid fa-star"></i>
                    <% } %>
                </span>
              </div>
              <div class="review-count">
                <div class="review-count">
                  <h5>
                    <%= listing.reviews %>
                  </h5>
                  <span>reviews</span>
                </div>
              </div>
            </div>
          </div>
          <p class="card-price"><span>Price: $ <%= listing.price %></span> per night</p>
          <p>Location: <%= listing.location %>
          </p>
          <p>Country: <%= listing.country %>
          </p>
          <div class="btn-group">
            <!-- edit route -->
            <form action="/listings/<%= listing._id %>/edit" method="GET">
              <button type="submit" class="btn btn-normal">Edit</button>
            </form>

            <!-- delete route -->
            <form action="/listings/<%= listing._id %>?_method=DELETE" method="POST">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>